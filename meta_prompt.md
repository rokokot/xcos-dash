---

xCoS Dashboard Project Design

---

## üéØ Objective

Design and scaffold a **complete full-stack project** called **xCoS Dashboard** ‚Äî an interactive, explainable constraint solving system.

This system combines **FastAPI + CPMpy** (Python backend) and **React + TypeScript (Vite)** (frontend) to let users:

* Model and solve constraint satisfaction problems (CSPs)
* Understand *why* models are satisfiable or unsatisfiable (MUS/MCS explanations)
* Edit, relax, or repair constraints interactively
* Visualize alternative solutions and trade-offs (Pareto / counterfactuals)
* Build trust in AI-driven constraint solving through transparent explanations

---

## üß© Context

xCoS Dashboard is part of a research effort on **human-explainable constraint solving** and **HCI for symbolic AI**.
The system should let users explore exam scheduling or similar CSPs interactively and understand solver behavior through visual explanations.

Environment target:

* Linux Mint 22.2 Zara (Ubuntu 24.04 base)
* Development in **VS Code** (primary IDE) and optionally WebStorm for UI work
* Python 3.12 +, Node 18 +

---

## üß± Desiderata

| Principle                 | Description                                                                                                  |
| ------------------------- | ------------------------------------------------------------------------------------------------------------ |
| **Explainability**        | Every solver outcome must include a clear explanation (MUS, MCS, OCUS, MARCO, QuickXplain, counterfactuals). |
| **Controllability**       | Users can toggle, edit, or weight constraints, trigger re-solves, and observe immediate changes.             |
| **Transparency**          | Each decision and explanation is traceable to specific constraint IDs.                                       |
| **Human-centered design** | Progressive disclosure of details, color-coded feedback, and low cognitive load.                             |
| **Extensibility**         | Modular, documented code that supports new solvers and visualizations.                                       |
| **Performance**           | Sub-second response (< 700 ms) for small to medium-sized edits.                                              |

---

## ‚öôÔ∏è Core Functionalities

### Backend (Python + FastAPI + CPMpy)

* `/api/model` ‚Üí create or update CPMpy models
* `/api/solve` ‚Üí run solver and return SAT/UNSAT/OPTIMAL status
* `/api/explain/mus`, `/api/explain/mcs`, `/api/explain/ocus` ‚Üí explanation endpoints
* `/api/whatif` ‚Üí counterfactual analysis (‚Äúwhat to change to make X possible‚Äù)
* `/api/alternatives` ‚Üí diverse solution enumeration
* `/api/compare` ‚Üí compare alternative solutions
* `/ws/{model_id}` ‚Üí WebSocket for streaming progress and partial solutions

### Frontend (React + TypeScript + Vite)

* **Constraint editor**: list, add, or modify constraints (hard/soft, weights)
* **Schedule grid**: visual placement and editing of resources (e.g., exams)
* **Explanation workspace**: show MUS/MCS sets, counterfactuals, Pareto trade-offs
* **Trade-off explorer**: visualize soft-constraint objectives (e.g., satisfaction vs. utilization)
* **Live interaction**: REST for actions, WebSocket for updates

---

## üìÇ Required Project Structure

```
xcos-dashboard/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ solve.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ explain.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ whatif.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ converter.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ explain_tools.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ .venv/
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConstraintList.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ScheduleGrid.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExplanationPanel.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TradeoffExplorer.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.tsx
‚îÇ   ‚îú‚îÄ‚îÄ vite.config.ts
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ .vscode/
‚îÇ   ‚îú‚îÄ‚îÄ launch.json
‚îÇ   ‚îú‚îÄ‚îÄ settings.json
‚îú‚îÄ‚îÄ xcos-dashboard.code-workspace
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ ARCHITECTURE.md
‚îú‚îÄ‚îÄ SETUP.md
‚îî‚îÄ‚îÄ MILESTONES.md
```

---

## üß∞ Environment Setup (to be generated by the agent)

**Python (backend):**

```bash
cd backend
python3 -m venv .venv
source .venv/bin/activate
pip install fastapi uvicorn[standard] cpmpy pydantic
pip freeze > requirements.txt
```

**Node (frontend):**

```bash
cd frontend
npm create vite@latest ./
# React + TypeScript
npm install
npm install axios
npm run dev
```

**VS Code Workspace:**
Generate `xcos-dashboard.code-workspace` linking both folders, setting Python interpreter path, and enabling compound ‚ÄúRun Full Stack‚Äù launch config for backend + frontend.

---

## üß≠ Deliverables

| Deliverable          | Description                                                                                |
| -------------------- | ------------------------------------------------------------------------------------------ |
| **ARCHITECTURE.md**  | Detailed system architecture and module relationships                                      |
| **SETUP.md**         | Step-by-step setup guide for Linux Mint 22.2                                               |
| **MILESTONES.md**    | Development roadmap (Core ‚Üí Explain ‚Üí Interact ‚Üí Optimize ‚Üí Evaluate)                      |
| **Working scaffold** | Backend (FastAPI + CPMpy) and frontend (React + TypeScript) connected with CORS + API call |
| **API Docs**         | Auto-generated OpenAPI via FastAPI                                                         |
| **UI prototypes**    | Minimal 3-panel layout with placeholder components                                         |
| **Evaluation plan**  | Metrics for usability, explainability, latency, and comprehension                          |


---

## üß™ Evaluation Criteria

* Latency < 700 ms for small models
* Accurate explanation (MUS = minimal unsat set)
* Task success in repair/what-if flows
* SUS ‚â• 80 usability
* Modular code structure passing lint & tests

---

## üöÄ Tasks for the Agent

1. **Generate backend scaffold** with FastAPI + CPMpy, including routers and sample `/solve` endpoint.
2. **Generate frontend scaffold** using React + Vite + TypeScript, including API call to `/solve`.
3. **Create environment setup scripts** and VS Code workspace configuration.
4. **Write documentation**: `README.md`, `ARCHITECTURE.md`, `SETUP.md`, `MILESTONES.md`.
5. **Ensure CORS + REST integration** between frontend and backend.
6. **Include placeholder logic** for future MUS/MCS explanation endpoints.
7. **Output all files and directories** exactly as listed in the structure above.

---

## ‚úÖ Expected Final Output

A reproducible project folder named `xcos-dashboard/` that contains:

* Fully runnable backend (`uvicorn main:app --reload`)
* Fully runnable frontend (`npm run dev`)
* Working REST interaction between them
* Documentation and setup guides
* Modular design ready to extend with explanations and visualizations

---

## üß† Meta-Note for Agent

* Reason step-by-step before generating code.
* Create all directories and files explicitly.
* Include explanatory comments and type hints.
* Keep all paths relative to project root.
* Verify internal imports and CORS compatibility.
* Output code and documentation in Markdown-friendly format.

---
